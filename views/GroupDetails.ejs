<%- include("./headerAdmin.ejs") %>
<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
					<!-- OVERVIEW -->
					<div class="panel panel-headline">
						
						
					<!-- END OVERVIEW -->
					<div class="row">
						<div class="col-md-12">
							<!-- RECENT PURCHASES -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">Group Details</h3>
									
									<div class="row">
										<div class="col-md-4">
										
										  </div>
										<div class="col-md-4"></div>
										<div class="col-md-4">
											<input type="text" id="myInput" class="form-control" placeholder="Search ...">
										</div>
									</div>
								</div>
								<script>
									
									window.onload = function(){
										
									  $("#myInput").on("keyup", function() {
										var value = $(this).val().toLowerCase();
										$("#myTable tr").filter(function() {
										  $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
										});
									  });
									};
									</script>
								<div class="panel-body no-padding">
									
									<br>
									<div class="container">
										<div class="row">
                                            <div class="col-md-12">
                                            <label>Group ID: </label><%=groups._id %>
                                            </div>
                                        </div>
                                            <div class="row">
                                            <div class="col-md-12">
                                                <label>No of Members: </label><%=groups.members.length %>
                                            </div>
                                        </div>
                                        <div class="row"> 
                                            <div class="col-md-12">
                                            <label>Creation Date: </label><%=groups.createdAt %>
                                            </div>
                                        </div>

                                            
                                       
									</div>
									
									<table class="table table-striped " style="margin-top:2%" id="myTable">
										<thead>
											<tr>
												<th>Member ID</th>
												<th>Email</th>
												<th>Amount</th>
                                                <th>Action</th><!-- status can be  InComplete, Complete, Paid -->
                                                
											

											</tr>
										</thead>
										<tbody>
											<% groups.members.forEach(member => {
													 %>
                                            
                                        <tr>
                                            <td><%= member._id %></td>
                                            <td><%= member.email %></td>
											<td>
												<form method="post" action="/admin/pay/user"><input type="number" name="amount" required></td>
												<input type="hidden" name="receiver" value='<%= member._id %>' required>
												<input type="hidden" name="groupID" value='<%= groups._id %>' required>
												<% if (member.payStatus) { %>
													<td ><button  class="btn btn-success">PAID</button></td>
												<% } else {%>
													<td ><input type="submit" class="btn btn-success" value="Pay Now" ></td>
													<% } %>
											</form>
											
                                            <!-- Group ID to Be Added !-->
                                         
                                        </tr>
										<% }) %>			
										</tbody>
									</table>
								</div>
								<div class="panel-footer">
									Total <%=groups.members.length %> Members..
								</div>
							</div>
							<!-- END RECENT PURCHASES -->
						</div>
						
						</div> 
					</div>
					
				
				</div>
			</div>
			 <!-- END MAIN CONTENT -->
			
		</div>
		<%- include("./footerAdmin.ejs") %>
<%- include("./headerAdmin.ejs") %>
<div class="main">
    <!-- MAIN CONTENT -->
    <div class="main-content">
        <div class="container-fluid">
            <!-- OVERVIEW -->
            <div class="panel panel-headline">
                
                
            <!-- END OVERVIEW -->
            <div class="row">
                <div class="col-md-12">
                    <!-- RECENT PURCHASES -->
                    <div class="panel">
                        <div class="panel-heading">
                            <h3 class="panel-title">News-Letters</h3>
                            
                        </div>
                      
                        <div class="panel-body ">
                           <form method="post" action='/update/newsletter' enctype="multipart/form-data" onsubmit="return verify()">
                            <div class="row"> 
                            <div class="col-md-12">
                                <img src="data:image/<%=img.contentType%>;base64, 
                     <%=img.data.toString('base64')%>" id="output" width="100%" height="400px"> 
                            </div>
                        </div>
                            <input type="hidden" value="<%=_id%>" name="id" >
                            <div class="form-group">
                                <label for="mobileInput">Heading</label>
                                <input type="text" placeholder="Enter heading here..." onkeypress="myFunction()" class="form-control" id="heading" value="<%= title %>" name = "title" required>  
                                <div class="invalid-feedback text-danger">
                                    Title is too short.
                                   </div>
                            </div>
                          
                            <br> 
                            <div class="form-group mt-4">
                                <label for="exampleFormControlFile1">Edit Cover Photo</label>
                                <input type="file" name="image"  id="file" accept="image/*"  onchange="loadFile(event)"   class="form-control-file" >
                              </div>
                            <div class="form-group">                          
                            <label for="mobileInput">Description</label>
                            <textarea name="description" onkeypress="myFunction()" id="description2" required><%= description %></textarea>
                            <script>
                                CKEDITOR.replace( 'description' );
                        </script>
                            </div>
                            <input type="submit" class="btn btn-primary" value="Submit" name="submit">
                            <div class="invalid-feedback text-danger">
                                Description should be longer than 20 characters.
                               </div>
                               </form>

                        </div>
                        <div class="panel-footer">
                          
                        </div>
                    </div>
                    <!-- END RECENT PURCHASES -->
                </div>
                
                </div> 
            </div>
            
        
        </div>
    </div>
     <!-- END MAIN CONTENT -->
    
</div>
<script src="https://cdn.ckeditor.com/ckeditor5/23.1.0/decoupled-document/ckeditor.js"></script>

<script>
    var loadFile = function(event) {
      var image = document.getElementById('output');
      image.src = URL.createObjectURL(event.target.files[0]);
    };
    </script>
<script>
    DecoupledEditor
        .create( document.querySelector( '#editor' ) )
        .then( editor => {
            const toolbarContainer = document.querySelector( '#toolbar-container' );

            toolbarContainer.appendChild( editor.ui.view.toolbar.element );
        } )
        .catch( error => {
            console.error( error );
        } );
        document.getElementsByClassName('invalid-feedback')[0].style.display = 'none';
 document.getElementsByClassName('invalid-feedback')[1].style.display = 'none'; 
function myFunction()
{
 document.getElementsByClassName('invalid-feedback')[0].style.display = 'none';
 document.getElementsByClassName('invalid-feedback')[1].style.display = 'none';
}


    function verify()
    {
       
        heading=document.getElementById('heading').value;
        // description=document.getElementById('description2').value
        if(heading.length<5)
        {  document.getElementsByClassName('invalid-feedback')[0].style.display = 'block'
            return false;
        }
        // if(description.length<=20)
        // { 
        //     document.getElementsByClassName('invalid-feedback')[1].style.display = 'block'
        //     return false;
        // }
        return true
    }
</script>

<%- include("./footerAdmin.ejs") %>